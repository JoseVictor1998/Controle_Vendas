@using Microsoft.AspNetCore.Components.Authorization
@using Microsoft.AspNetCore.Authorization
@inject NavigationManager Navigation

<div class="@NavMenuCssClass" @onclick="ToggleNavMenu">
    <nav class="flex-column">
        
        @* PAINEL GERAL: Visível para todos os níveis de acesso *@
        <div class="nav-item px-3">
            <NavLink class="nav-link" href="" Match="NavLinkMatch.All">
                <span class="oi oi-home" aria-hidden="true"></span> Home
            </NavLink>
        </div>

        @* SETOR DE VENDAS: Só God, Admin e Vendedor *@
        <AuthorizeView Roles="God,Admin,Vendedor">
            <div class="nav-item px-3">
                <NavLink class="nav-link" href="novo-pedido">
                    <span class="oi oi-plus" aria-hidden="true"></span> Novo Pedido
                </NavLink>
            </div>
        </AuthorizeView>

        @* SETOR DE CRIAÇÃO: Só God, Admin e Arte *@
        <AuthorizeView Roles="God,Admin,Arte">
            <div class="nav-item px-3">
                <NavLink class="nav-link" href="fila-arte">
                    <span class="oi oi-brush" aria-hidden="true"></span> Fila de Arte
                </NavLink>
            </div>
            <div class="nav-item px-3">
                <NavLink class="nav-link" href="fila-arte-full">
                    <span class="oi oi-layers" aria-hidden="true"></span> Arte Finalista Full
                </NavLink>
            </div>
        </AuthorizeView>

        @* SETOR DE IMPRESSÃO: Só God, Admin e Impressao/Producao *@
        <AuthorizeView Roles="God,Admin,Impressao,Producao">
            <div class="nav-item px-3">
                <NavLink class="nav-link" href="fila-impressao">
                    <span class="oi oi-print" aria-hidden="true"></span> Fila Impressão
                </NavLink>
            </div>
        </AuthorizeView>

        
        @* SETOR DE PRODUÇÃO: Ajustado para o seu novo arquivo *@
        <AuthorizeView Roles="God,Admin,Impressao,Producao">
            <div class="nav-item px-3">
                <NavLink class="nav-link" href="fila-producao">
                    <span class="oi oi-list" aria-hidden="true"></span> Fila de Produção
                </NavLink>
            </div>
        </AuthorizeView>

        @* GESTÃO TOTAL: Visível apenas para God e Admin *@
        <AuthorizeView Roles="God,Admin">
            <div class="nav-item px-3">
                <NavLink class="nav-link" href="fila-producao-geral">
                    <span class="oi oi-list-rich" aria-hidden="true"></span> Monitoramento Geral
                </NavLink>
            </div>
        </AuthorizeView>

        @* GERENCIAMENTO: Só God e Admin *@
        <AuthorizeView Roles="God,Admin">
            <div class="nav-item px-3 mt-4">
                <hr style="border-top: 1px solid #334155; margin: 10px 0;" />
                <NavLink class="nav-link" href="dashboard-gerencial">
                    <span class="oi oi-dashboard" aria-hidden="true"></span> Dashboard BI
                </NavLink>
            </div>
            <div class="nav-item px-3">
                <NavLink class="nav-link" href="usuarios">
                    <span class="oi oi-key" aria-hidden="true"></span> Usuários
                </NavLink>
            </div>
        </AuthorizeView>

        @* SAÍDA *@
        <div class="nav-item px-3 mt-5">
            <NavLink class="nav-link text-danger" href="logout">
                <span class="oi oi-account-logout" aria-hidden="true"></span> Sair do Sistema
            </NavLink>
        </div>

    </nav>
</div>

@code {
    private bool collapseNavMenu = true;

    private string? NavMenuCssClass => collapseNavMenu ? "collapse" : null;

    private void ToggleNavMenu()
    {
        collapseNavMenu = !collapseNavMenu;
    }
}
